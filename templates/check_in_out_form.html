{# check_in_out_form.html #}
{% if today_record %}
  <!-- Formulario de fichar salida -->
  <form
    id="checkOutForm"
    action="{{ url_for('time.check_out') }}"
    method="POST"
    class="mt-8 space-y-4"
  >
    <div>
      <label for="notes" class="block text-sm font-semibold mb-2" style="color: var(--text-primary);">
        Notas (opcional)
      </label>
      <textarea
        name="notes"
        id="notes"
        rows="3"
        class="w-full px-4 py-3 rounded-lg focus:outline-none focus:ring-2 transition-all"
        style="background-color: var(--bg-secondary); color: var(--text-primary); border: 2px solid var(--border-color); focus:border-color: var(--accent-primary); focus:box-shadow: 0 0 0 3px rgba(0, 217, 191, 0.1);"
        placeholder="Añade aquí alguna nota sobre tu jornada…"
      >{{ '' }}</textarea>
    </div>

    <!-- Botones de acción en la misma línea -->
    <div class="flex gap-3">
      <!-- Botón de pausa/descanso -->
      <button
        type="button"
        id="pauseBtn"
        class="flex-1 inline-flex items-center justify-center gap-2 py-4 px-6 font-bold rounded-full text-white transition-all hover:opacity-90 active:transform active:scale-95"
        style="background-color: #CA8A04;"
        onclick="openPauseModal()"
      >
        Descanso
      </button>

      <!-- Botón de fichar salida -->
      <button
        id="checkOutBtn"
        type="submit"
        class="flex-1 inline-flex items-center justify-center gap-2 py-4 px-6 font-bold rounded-full text-white transition-all hover:opacity-90 active:transform active:scale-95"
        style="background-color: #EA580C;"
      >
        Fichar Salida
      </button>
    </div>
  </form>

  <!-- Mostrar pausas activas -->
  <div id="activePause" class="hidden mt-4 p-4 rounded-lg" style="background-color: rgba(202, 138, 4, 0.15); border: 2px solid #CA8A04;">
    <h4 class="font-bold mb-2" style="color: var(--accent-primary);">Pausa Activa</h4>
    <p class="text-sm" style="color: var(--text-primary);">
      <strong>Tipo:</strong> <span id="pauseType"></span><br>
      <strong>Inicio:</strong> <span id="pauseStartTime"></span><br>
      <strong>Duración:</strong> <span id="pauseDuration">00:00</span>
    </p>
    <button
      type="button"
      onclick="endPause()"
      class="mt-3 w-full py-2 px-4 font-bold rounded-full text-white transition-all hover:opacity-90"
      style="background-color: var(--accent-primary);"
    >
      Reanudar Trabajo
    </button>
  </div>

{% else %}
  <!-- Formulario de fichar entrada -->
  <form action="{{ url_for('time.check_in') }}" method="POST" class="mt-8">
    <button
      type="submit"
      class="w-full inline-flex items-center justify-center gap-2 py-4 px-6 font-bold rounded-full text-white transition-all hover:opacity-90 active:transform active:scale-95"
      style="background-color: var(--accent-primary);"
    >
      Fichar Entrada
    </button>
  </form>
{% endif %}
