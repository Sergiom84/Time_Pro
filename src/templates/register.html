<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Registro - TimeTracker</title>

    <!-- Favicon -->
    <link rel="icon" type="image/png" href="{{ url_for('static', filename='logo.png') }}">

    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
          theme: {
            extend: {
              colors: {
                'timetracker-primary': '#E85D8A',
                'timetracker-secondary': '#4A4A4A',
              }
            }
          }
        }
      </script>
</head>
<body class="bg-black text-white font-sans flex justify-center items-center min-h-screen m-0">
    <div class="text-center p-10 w-full max-w-md">
        <h1 class="text-timetracker-primary mb-10 text-3xl font-semibold">Crear Cuenta</h1>

        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                <div id="flash-messages" class="mb-4">
                {% for category, message in messages %}
                    <div class="p-3 rounded-md
                        {% if category == 'danger' %} bg-red-500 border border-red-700 text-white
                        {% elif category == 'success' %} bg-green-500 border border-green-700 text-white
                        {% else %} bg-blue-500 border border-blue-700 text-white {% endif %}
                        ">{{ message }}</div>
                {% endfor %}
                </div>
            {% endif %}
        {% endwith %}

        <form method="POST" action="{{ url_for('auth.register') }}" class="space-y-6">
            <div>
                <label for="client_identifier" class="block text-left text-sm font-medium text-gray-300 mb-1">
                    Empresa / ID de cliente:
                </label>
                <input type="text" id="client_identifier" name="client_identifier" required
                       class="w-full px-4 py-2 border border-gray-600 rounded-md bg-gray-800 text-white focus:outline-none focus:ring-2 focus:ring-timetracker-primary"
                       placeholder="Ej. aluminios-lara o 12">
            </div>
            <div>
                <label for="username" class="block text-left text-sm font-medium text-gray-300 mb-1">Nombre de Usuario:</label>
                <input type="text" id="username" name="username" required 
                       class="w-full px-4 py-2 border border-gray-600 rounded-md bg-gray-800 text-white focus:outline-none focus:ring-2 focus:ring-timetracker-primary">
            </div>
            <div>
                <label for="full_name" class="block text-left text-sm font-medium text-gray-300 mb-1">Nombre Completo:</label>
                <input type="text" id="full_name" name="full_name" required 
                       class="w-full px-4 py-2 border border-gray-600 rounded-md bg-gray-800 text-white focus:outline-none focus:ring-2 focus:ring-timetracker-primary">
            </div>
            <div>
                <label for="email" class="block text-left text-sm font-medium text-gray-300 mb-1">Email:</label>
                <input type="email" id="email" name="email" required 
                       class="w-full px-4 py-2 border border-gray-600 rounded-md bg-gray-800 text-white focus:outline-none focus:ring-2 focus:ring-timetracker-primary">
            </div>
            <div>
                <label for="password" class="block text-left text-sm font-medium text-gray-300 mb-1">Contraseña:</label>
                <input type="password" id="password" name="password" required 
                       class="w-full px-4 py-2 border border-gray-600 rounded-md bg-gray-800 text-white focus:outline-none focus:ring-2 focus:ring-timetracker-primary">
            </div>
            <div>
                <label for="confirm_password" class="block text-left text-sm font-medium text-gray-300 mb-1">Confirmar Contraseña:</label>
                <input type="password" id="confirm_password" name="confirm_password" required 
                       class="w-full px-4 py-2 border border-gray-600 rounded-md bg-gray-800 text-white focus:outline-none focus:ring-2 focus:ring-timetracker-primary">
            </div>
            <button type="submit" 
                    class="w-full py-3 px-6 border-none rounded-full cursor-pointer text-lg font-bold transition-opacity duration-300 ease-in-out bg-timetracker-primary text-white hover:opacity-90">
                Registrarse
            </button>
        </form>
        
        <p class="mt-6 text-sm text-gray-400">
            ¿Ya tienes cuenta? <a href="{{ url_for('auth.login') }}" class="text-timetracker-primary hover:underline">Inicia sesión aquí</a>
        </p>
    </div>

    <script>
        // Auto-desvanecido de mensajes flash tras 2 segundos
        const flashMessages = document.getElementById('flash-messages');
        if (flashMessages) {
            setTimeout(() => {
                flashMessages.style.transition = 'opacity 0.6s ease';
                flashMessages.style.opacity = '0';
                setTimeout(() => flashMessages.remove(), 800);
            }, 2000);
        }
    </script>
</body>
</html>
